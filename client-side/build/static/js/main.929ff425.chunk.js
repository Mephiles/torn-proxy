(this["webpackJsonpclient-side"]=this["webpackJsonpclient-side"]||[]).push([[0],[,,,,function(e,t,a){e.exports={metaRow:"ProxyKey_metaRow__2JeuK",keyRow:"ProxyKey_keyRow__8puyP",altRow:"ProxyKey_altRow__1oV-P"}},function(e,t,a){e.exports={root:"App_root__3JlSw",myProxyKeysHeading:"App_myProxyKeysHeading__S6QjS"}},function(e,t,a){e.exports={root:"Faq_root__zfkZZ",question:"Faq_question__1LI2v"}},,,function(e,t,a){e.exports={wrongKey:"TornKeyForm_wrongKey__s2rQ-"}},function(e,t,a){e.exports={root:"ProxyKeys_root__3D-FE"}},function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),l=(a(16),a(1)),c=a(5),u=a.n(c),i=a(2),y=a.n(i),p=a(3),d=a(9),m=a.n(d),h=r.a.createContext({serverBaseUrl:"",user:null});h.displayName="AppContext";var f=h,v=function(e){var t=e.onAuthenticated,a=Object(n.useContext)(f),o=Object(n.useState)(""),s=Object(l.a)(o,2),c=s[0],u=s[1],i=Object(n.useState)(!1),d=Object(l.a)(i,2),h=d[0],v=d[1],E=Object(n.useState)(!1),k=Object(l.a)(E,2),b=k[0],w=k[1],g=function(){var e=Object(p.a)(y.a.mark((function e(n){var r,o,s,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),v(!0),w(!1),e.next=5,fetch(a.serverBaseUrl+"/authenticate",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:c})});case 5:if(r=e.sent,v(!1),200!==r.status){e.next=16;break}return e.next=10,r.json();case 10:o=e.sent,s=o.id,l=o.name,t({id:s,name:l}),e.next=17;break;case 16:w(!0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:g},r.a.createElement("h2",null,"Authenticate"),r.a.createElement("p",null,"Enter your TORN API key:"),r.a.createElement("input",{className:b?m.a.wrongKey:"",type:"text",value:c,onChange:function(e){return u(e.target.value)},disabled:h}),r.a.createElement("input",{type:"submit",disabled:h,value:"Unlock"}),h&&r.a.createElement("span",null,"checking..."))},E=a(4),k=a.n(E),b=function(e){var t=e.keyEntity,a=e.useAltStyle;return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{className:k.a.metaRow+" "+(a?k.a.altRow:"")},r.a.createElement("td",null,t.description),r.a.createElement("td",null,r.a.createElement("span",{title:t.createdAt.toString()},t.createdAt.toLocaleDateString())),r.a.createElement("td",null,"revoke")),r.a.createElement("tr",{className:k.a.keyRow+" "+(a?k.a.altRow:"")},r.a.createElement("td",{colSpan:3},t.key)))},w=a(10),g=a.n(w),x=function(){var e=Object(n.useContext)(f),t={convertKeyRecordToEntity:function(e){return{key:e.key,userId:e.user_id,description:e.description,createdAt:new Date(e.created_at)}}},a=Object(n.useState)(!1),o=Object(l.a)(a,2),s=o[0],c=o[1],u=Object(n.useState)([]),i=Object(l.a)(u,2),d=i[0],m=i[1],h=Object(n.useState)(""),v=Object(l.a)(h,2),E=v[0],k=v[1],w=Object(n.useState)(!1),x=Object(l.a)(w,2),O=x[0],_=x[1];Object(n.useEffect)((function(){c(!0),Object(p.a)(y.a.mark((function a(){var n,r,o;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e.serverBaseUrl+"/keys?user_id="+(null===(n=e.user)||void 0===n?void 0:n.id));case 2:return r=a.sent,a.next=5,r.json();case 5:o=a.sent.map(t.convertKeyRecordToEntity),c(!1),m(o);case 8:case"end":return a.stop()}}),a)})))()}),[]);var j=function(){var a=Object(p.a)(y.a.mark((function a(n){var r,o,s,l;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),o={user_id:null===(r=e.user)||void 0===r?void 0:r.id,description:E},_(!0),a.next=5,fetch(e.serverBaseUrl+"/keys",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 5:return s=a.sent,a.next=8,s.json();case 8:l=a.sent.map(t.convertKeyRecordToEntity),m(l),k(""),_(!1);case 12:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return s?r.a.createElement("span",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:g.a.root},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Key"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,d.map((function(e,t){return r.a.createElement(b,{key:e.key,keyEntity:e,useAltStyle:t%2!==0})})))),r.a.createElement("div",null,r.a.createElement("h3",null,"New key"),r.a.createElement("form",{action:"",onSubmit:j},r.a.createElement("input",{type:"text",placeholder:"Description",value:E,onChange:function(e){return k(e.target.value)},disabled:O}),r.a.createElement("input",{type:"submit",value:"Create key",disabled:O}),O&&r.a.createElement("span",null,"creating key..."))))},O=a(6),_=a.n(O),j=function(e){var t=e.question,a=e.answer,n=e.children;return r.a.createElement("div",{className:_.a.root},r.a.createElement("p",{className:_.a.question},t),a&&r.a.createElement("p",null,a),!a&&n)};var R=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],o=t[1],s={serverBaseUrl:"https://torn-proxy.com/api",user:a};return r.a.createElement(f.Provider,{value:s},r.a.createElement("div",{className:u.a.root},r.a.createElement("h1",null,"TORN proxy"),r.a.createElement("p",null,"The only place that needs to know your TORN API key."),r.a.createElement("p",null,"Apps can use dedicated proxy keys to make requests to the TORN API."),r.a.createElement("p",null,"Easy app-based access control for added privacy and security."),null===a&&r.a.createElement(v,{onAuthenticated:o}),r.a.createElement("div",{className:u.a.myProxyKeysHeading},r.a.createElement("h2",null,"My proxy keys"),null!==a&&r.a.createElement("button",{onClick:function(e){e.preventDefault(),o(null)}},"Lock")),null===a&&r.a.createElement("p",null,"Locked. Enter your TORN API key first."),null!==a&&r.a.createElement(x,null),null===a&&r.a.createElement("div",{className:u.a.faq},r.a.createElement("h2",null,"FAQ"),r.a.createElement(j,{question:"Why?",answer:"TORN is not going to support multiple API keys. We feel privacy should be top of mind for everyone."}),r.a.createElement(j,{question:"Okay, but how?",answer:"Instead of giving out your single TORN API key to apps, you create a new proxy key and use that instead. Want to stop using said app? Then simply revoke the key and the app will longer have access. No more need to reset your TORN API key."}),r.a.createElement(j,{question:"Why trust you?"},r.a.createElement("p",null,"I highly value security and privacy. Ched's rejection of my ",r.a.createElement("a",{href:"https://www.torn.com/forums.php#/p=threads&f=19&t=16177140",target:"_blank",rel:"noopener noreferrer"},"[100R+] API keys suggestion")," triggered this proxy idea. If you're an ArsonWarehouse user, I already have your TORN API key. I never have, and never will, abuse it. Better to trust a single party than a whole range of apps and sites.")),r.a.createElement(j,{question:"Okay, but what about leaks?",answer:"Your TORN key is encrypted before it's stored. If the database is ever accessed by a third party, they can see your proxy keys but not your TORN key. If ever does leak I'll be transparent about it so you can take action."}),r.a.createElement(j,{question:"Why are proxy keys not encrypted?",answer:"To keep the proxy service as fast as possible. With every request, I need to look up the TORN key that belongs to the given proxy key and forward the request to TORN. I need to be able to efficiently query the proxy keys table."}),r.a.createElement(j,{question:"Roadmap?",answer:"I plan on adding permissions. Simple ones at first, separating public from private data. That way, apps can use your key to fetch market info but not sensitive data such as battle stats."}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[11,1,2]]]);
//# sourceMappingURL=main.929ff425.chunk.js.map